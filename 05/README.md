# 5. 암호화
- 평문(plaintext)을 암호문(ciphertext) 으로 변환하는 것
  - 평문 : 누구나 읽으면 곧바로 이해할 수 있는 정보
  - 암호문 : 읽는다고 모두가 이해할 수는 없는 정보
- 단, 특별한 정보를 아는 사람만 이해할 수 있음

#### 복호화
- 암호문을 다시 평문으로 변환하는 것
- 암호화에 사용한 방법을 알아야 복호화 가능

#### 해시 알고리즘과 암호화의 차이점
- 해시 알고리즘은 원문 복구를 막는게 목표
- 암호화 알고리즘은 원문 복구를 허용해야함

## 암호화의 역사
- 고대 그리스, 로마에서도 군용 목적으로 사용
- 19~20세기에는 특히 군용으로 많이 사용
  - 무전으로 보내는 군사 정보
  - 2차 세계 대전중 독일군이 사용한 에니그마 기계
- 현대 사회에서는 모든것을 암호화해야 함
  - 전화 혹은 온라인을 통해 타인과 대화하는 일이 많아짐
  - 온라인에 저장된 정보가 너무 많음
  
## 정수론(number theory)
- 정수의 성질에 대한 연구하는 학문
- 2진수로 표현된 데이터를 암호화하려다 보니 갑자기 주목 받음
- 소수에 관련된 정수론적 알고리즘이 많은 주목을 받음
  - 암호문의 패턴을 들키지 않으려면 겹치지 않는 수가 필요
  - 소수는 자연에서 가장 안 겹치는 수
  
### 암호학에서 사용하는 정수
- 매우 큰 정수
  - 흔히 사용하는 32비트 등의 정수가 아님
- 입력 크기 N(N : 비트수)
  - 보통 배열 속의 요소 수를 의미
  - 암호학에서 사용하는 정수에서는 비트 수를 의미
- 곱셈, 나눗셈, 나머지 연산의 시간 복잡도
  - 보통 정수 : O(1)
  - 암호학에서 사용하는 정수는 비트 수에 비례
  
### 현대에서 사용하는 암호화 알고리즘 두 종류
- 대칭 키 암호화
  - 암호화/복호화에 동일한 키를 사용
- 비대칭 키 암호화
  - 공개 키 암호화라고도 함
  - 암호화와 복호화에 사용하는 키가 다름
  
## 대칭 키 암호화
- 암호화/복호화에 동일한 키를 사용
- 이 키는 메시지 송신자와 수신자가 공유하는 비밀
- 송신자가 수신자에게 비밀스럽게 키를 알려줄 방법이 필요

### 스트림 암호 vs 블록 암호
- 스트림 암호의 예
  - 한번에 1바이트씩 받아 암호화를 진행
  - 안전하려면 각 바이트에 적용하는 키가 달라야 함
    - 보통 시드 값을 정하고 난수로 생성
  - 블록 암호보다 설정이 복잡하나 속도가 빠름
- 블록 암호
  - 정해진 블록 크기(64비트 이상) 만큼의 바이트를 한번에 암호화
  - 각 블록에 사용하는 키가 동일함
  - 스트림 암호보다 설정이 간단하나 속도가 느림
  
#### Wi-Fi 비밀번호도 일종의 대칭 키
- WPA2-Personal
  - 스마트폰이 처음 공유기에 접속 시 교환하는 어떤 값과 비밀번호를 합쳐 키 생성
  - 그 키를 이용해서 메세지를 암호화
  - 모든 접속자마다 다른 키를 사용
  - 하지만 해커가 둘 사이의 모든 트래픽을 캡처한다면 읽기 가능
  
### AES
- NSA에서 일급비밀 용으로 승인한 유일한 공개 암호화 알고리즘
- 현재 가장 널리 사용되는 대칭 키 알고리즘
  - WPA2 프로토콜의 일부로 사용되기도 함
- 블록 크기 : 128비트
- 키 길이 : 128, 192 또는 256비트
  - 128비트 : 10라운드
  - 192비트 : 12라운드
  - 256비트 : 14라운드
  
#### AES의 블록
- 한번에 16바이트씩 읽어서 암호화
- 4 x 4 행렬로 배치

#### AES 알고리즘의 구성
1. 키 확장
2. 0라운드
    1) 라운드 키 더하기
3. 9/11/13 라운드
    1) 바이트 대체 (룩업 테이블을 사용) - 혼돈(confusion)효과를 성취
    2) 행 이동 - 확산효과를 성취
    3) 열 섞기 (행렬 x 벡터 곱을 이용)
    4) 라운드 키 더하기
4. 최종 라운드(총 라운드 수가 10/12/14가 됨)
    1) 바이트 대체
    2) 행 이동
    3) 라운드 키 더하기