# 4. 해시 알고리즘

다양한 해시 알고리즘의 용도
- 해시(hash)는 컴퓨터 공학에서 매우 근본이 되는 알고리즘 중 하나

해시 함수의 정의
- 임의의 크기를 가진 값을 고정 크기의 값에 대응시키는 함수
- 수학에서의 함수의 정의도 만족해야 함
- 입력값이 같으면 언제나 출력값도 같아야 함(결정론적 작동)

분류
- (비암호학적) 해시 함수
- 함호학적 해시 함수


- 체크섬(검사합, checksum)
- 순환 중복 검사(cyclic redundancy check, CRC)

속성
- 효율성
- 균일성

## 균일성
- 해시 함수의 출력값이 고르게 분포될수록 균일성이 높음
- 흔히 좋은 해시 함수는 균일성이 높아야 한다
    - 출력 범위 안의 모든 값들이 동일한 확률로 나와야 함(균등 분포)
    - 해시 충돌이 적어 O(1) 해시 테이블을 기대할 수 잇음
- 완벽한 해시 함수 : 해시 충돌이 전혀 없는 함수

### 균일성의 측정
- 카이제곱 검정을 이용
  ![카이제곱 검정](./img/img.png "카이제곱 검정")
- 결과 : 0.95 ~ 1.05 사이면 균일한 분포를 가진 해시 함수
- 해시값이 덜 중복되게 버킷 수를 정할 것(소수 사용)
- 완벽한 '눈사태'가 나도록 해시 함수를 설계할 것
    - 입력값이 약간만 바뀌어도 출력값이 굉장히 많이 바뀌는 것
    - 엄격한 눈사태 기준(strict avalanche criterion, SAV)
        - 입력값에서 1비트를 뒤집으면 출력값의 각 비트가 뒤집힐 확률이 50%
        - 이 기준을 충족하는 해시 함수는 분포가 균일할 가능성이 매우 높음
    
### 지역 민감 해시(locality-sensitive hashing)
- 해시 충돌의 최소화 대신 최대화를 목표로 하는 알고리즘
- 비슷한 내용을 가진 데이터끼리 충돌해야 함
- 엄청나게 많은 데이터에서 비슷한 것들을 찾는 용도
    - 스팸 메일 찾기
    - 웹 검색 엔진에서 비슷한 문서 추천하기
    - 음원, 사진 등의 저작권 침해 검사
    - ...

## 효율성
- 보통 빠른 해시 함수를 선호
- 공간을 더 낭비해도 빠른 접근 속도를 선호
- 충돌이 좀 더 나더라도 더 빠른 함수를 선호
- 하드웨어 가속이 어려운 해시를 선호하는 경우도 있음

### 암호학적 해시 알고리즘의 추가 속성
- 역상 저항성(pre-image resistance)
- 제 2역상 저항성(second pre-image resistance)
- 충돌 저항성(collision resistance)

## (비암호학적) 해시 함수
- 보안적으로 문제없는 용도에 주로 사용
    - 데이터 저장 및 찾기
    - 저장/전송 중에 생긴 데이터 오류 탐지
    - 고유한 ID 생성
    - ...
- 모든 데이터에 대해 최고의 결과를 보장하는 해시 함수는 존재하지 않음
- 입력값에 따라 다른 해시 함수를 사용하는 확률적 알고리즘은 존재
    - 유니버셜 해싱
- 비트 패킹(bit-packing)도 해시 함수로 사용 가능
    - 균일성이 높지 않음
